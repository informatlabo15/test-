<div [@routerTransition] class="container">
    <app-page-header [heading]="'Estudiantes'" [icon]="'fa fa-users'"></app-page-header>
    <div class="forms  addForm" id="estudianteForm" *ngIf="isToAdd || isToUpdate">
        <div>
            <div class="row">
                <div class="col">
                    <h3>
                        <!--                     <i class="fa fa-id-card-o" aria-hidden="true"></i> Datos Generales del Docente -->
                    </h3>
                    <hr />
                    <!-- star Form -->
                    <form [formGroup]="estudianteForm" (ngSubmit)="onSubmit()" accept-charset="UTF-8" id="registerForm">
                        <div class="form-row">
                            <div class="buttons-row">
                                <button *ngIf="!loading" class="btn btn-success" type="submit"
                                    [disabled]="estudianteForm.pristine">Guardar</button>
                                <a *ngIf="loading" class="btn btn-info">Guardando
                                    <div class="loading-container">
                                        <div class="loading">
                                            <ngx-loading [show]="loading"
                                                [config]="{primaryColour: primaryColour, secondaryColour: secondaryColour, backdropBorderRadius: '3px' }"
                                                [template]="customLoadingTemplate"></ngx-loading>
                                        </div>
                                    </div>
                                </a>
                                <button type="button" class="btn btn-success" (click)="goBack()">Atras</button>
                            </div>
                        </div>
                        <ngb-tabset>
                            <ngb-tab>
                                <ng-template ngbTabTitle><b>Ficha del Estudiante</b></ng-template>
                                <ng-template ngbTabContent>
                                    <!-- Star Row Identificacion -->
                                    <hr />
                                    <!-- star collapse datos generales -->
                                    <ngb-accordion [closeOthers]="true" activeIds="tab-datosGenerales">
                                        <ngb-panel id="tab-datosGenerales" title="DATOS GENERALES">
                                            <ng-template ngbPanelContent>
                                                <div class="form-row">
                                                    <div class="form-group col-md-6 col-lg-4">
                                                        <label class="labelGroup">Identificación (Cédula)
                                                            <span></span></label>
                                                        <input type="text" formControlName="identificacion"
                                                            class="form-control" id="textIdentificacion"
                                                            mask="000-000000-0000S" placeholder="N° de Cédula" />
                                                    </div>
                                                    <div class="form-group col-md-6 col-lg-4">
                                                        <label class="labelGroup">N° de Carnet<span
                                                                class="required">*</span></label>
                                                        <input type="text" class="form-control" id="textCodigo"
                                                            placeholder="Número de Carnet" formControlName="carnet" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->
                                                <!-- Star Row Nombre y Apellidos -->

                                                <div class="form-row">
                                                    <label class="labelGroup">Nombres y Apellidos<span
                                                            class="required">*</span></label>
                                                    <div class="form-group col-md-4 col-lg-4">
                                                        <input type="text" class="form-control" id="textNombre"
                                                            placeholder="Nombre"
                                                            [ngClass]="{ 'is-invalid': submitted && f.nombre.errors }"
                                                            formControlName="nombre" />
                                                        <div *ngIf="submitted && f.nombre.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.nombre.errors.required">Por favor Digite el
                                                                Nombre</div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-md-4 col-lg-4">
                                                        <input type="text" class="form-control" id="textApellidoPat"
                                                            placeholder="1er Apellido"
                                                            [ngClass]="{ 'is-invalid': submitted && f.apellidoPat.errors }"
                                                            formControlName="apellidoPat" />
                                                        <div *ngIf="submitted && f.apellidoPat.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.apellidoPat.errors.required">Por favor Digite
                                                                el Apellido</div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-md-4 col-lg-4">
                                                        <input type="text" class="form-control" id="textApellidoMat"
                                                            placeholder="Apellido Materno"
                                                            formControlName="apellidoMat" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->

                                                <!-- Star Row Fecha y Lugar de Nacimiento -->
                                                <hr />
                                                <div class="form-row">
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup">Fecha de Nacimiento<span
                                                                class="required">*</span></label>
                                                        <input type="date" class="form-control" id="textFechaNacimiento"
                                                            placeholder="Fecha de Nacimiento"
                                                            [ngClass]="{ 'is-invalid': submitted && f.fechaNacimiento.errors }"
                                                            formControlName="fechaNacimiento" />
                                                        <div *ngIf="submitted && f.fechaNacimiento.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.fechaNacimiento.errors.required">Por favor
                                                                Seleccione la Fecha de Nacimiento
                                                            </div>
                                                        </div>
                                                        <!-- <div class="input-group">
                            <input class="form-control" placeholder="dd-mm-aaaa" id="textFechaNacimiento"
                                     ngbDatepicker #d="ngbDatepicker"  formControlName="fechaNacimiento"  [ngClass]="{ 'is-invalid': submitted && f.fechaNacimiento.errors }"
                              formControlName="fechaNacimiento">
                            <div class="input-group-append">
                              <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"><i class="fa fa-calendar" aria-hidden="true"></i> </button>
                            </div>
                          </div> -->
                                                        <div *ngIf="submitted && f.fechaNacimiento.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.fechaNacimiento.errors.required">Por favor
                                                                Seleccione la Fecha de Nacimiento
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-md-4 ">
                                                        <label class="labelGroup">Estado Civil</label>
                                                        <select class="custom-select" id="textEstadoCivil"
                                                            formControlName="estadoCivil">
                                                            <option value="" disabled>Seleccione una opción</option>
                                                            <option value="Soltero">Soltero</option>
                                                            <option value="Casado">Casado</option>
                                                            <option value="Union">Unión de Hecho Estable</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-md-4 ">
                                                        <label class="labelGroup"><i class="fa fa-genderless"
                                                                aria-hidden="true"></i> Sexo<span
                                                                class="required">*</span></label>
                                                        <select class="custom-select" id="textSexo"
                                                            formControlName="sexo"
                                                            [ngClass]="{ 'is-invalid': submitted && f.sexo.errors }">
                                                            <option value="" disabled>Seleccione una opción</option>
                                                            <option value="M">Masculino</option>
                                                            <option value="F">Femenino</option>
                                                        </select>
                                                        <div *ngIf="submitted && f.sexo.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.sexo.errors.required">Por favor Seleccione una
                                                                opción</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End Row -->

                                                <!-- Star Row  Dirección -->
                                                <div class="form-row">
                                                    <label class="labelGroup"><i class="fa fa-address-book"
                                                            aria-hidden="true"></i> Localidad /
                                                        Dirección
                                                        <span class="required">*</span></label>
                                                    <div class="form-group col-md-4 ">
                                                        <input type="text" class="form-control" id="textDepartamento"
                                                            placeholder="Departamento" formControlName="departamento"
                                                            [ngClass]="{ 'is-invalid': submitted && f.departamento.errors }" />
                                                        <div *ngIf="submitted && f.departamento.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.departamento.errors.required">Por Favor Digite
                                                                el Departamento</div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <input type="text" class="form-control" id="textMunicipio"
                                                            placeholder="Municipio" formControlName="municipio"
                                                            [ngClass]="{ 'is-invalid': submitted && f.municipio.errors }" />
                                                        <div *ngIf="submitted && f.municipio.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.municipio.errors.required">Por Favor Digite el
                                                                Municipio</div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-12">
                                                        <input type="text" class="form-control" id="textDireccion"
                                                            placeholder="Dirección" formControlName="direccion"
                                                            [ngClass]="{ 'is-invalid': submitted && f.direccion.errors }" />
                                                        <div *ngIf="submitted && f.direccion.errors"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f.direccion.errors.required">Por Favor Digite la
                                                                dirección</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End Row -->

                                                <!-- Star Row  Teléfono / Email -->
                                                <hr />
                                                <div class="form-row">
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup"><i class="fa fa-phone"
                                                                aria-hidden="true"></i> Teléfono</label>
                                                        <input type="tel" class="form-control" id="textTelefono"
                                                            placeholder="Teléfono" mask="0000-0000"
                                                            formControlName="telefono" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup"><i class="fa fa-mobile"
                                                                aria-hidden="true"></i> Celular</label>
                                                        <input type="tel" class="form-control" id="textCelular"
                                                            placeholder="Celular" mask="0000-0000"
                                                            formControlName="celular" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup"><i class="fa fa-envelope-open"
                                                                aria-hidden="true"></i>
                                                            Email</label>
                                                        <input type="text" class="form-control" id="textEmail"
                                                            placeholder="Correo Electrónico" formControlName="email" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->

                                                <!-- Star Row Religión -->
                                                <hr />
                                                <div class="form-row">
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup">Religión</label>
                                                        <input type="text" class="form-control" id="textReligion"
                                                            placeholder="Religión" formControlName="religion" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup">Trabajo Pastoral</label>
                                                        <input type="text" class="form-control" id="textTrabaPastoral"
                                                            placeholder="Trabajo Pastoral"
                                                            formControlName="trabajoPastoral" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->

                                                <!-- Star Row  Informacion del Trabajo -->
                                                <hr />
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-1"
                                                        for="checkboxTrabaja">¿Trabaja?</label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxTrabaja" data-md-icheck
                                                                (change)="nTrabajaVisible($event)"
                                                                formControlName="trabaja" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row" *ngIf="ifTrabaja">
                                                    <label class="labelGroup"><i class="fa fa-location-arrow"
                                                            aria-hidden="true"></i> Información
                                                        Laboral</label>
                                                    <div class="form-group col-md-4 ">
                                                        <input type="text" class="form-control" id="textLugarTrabajo"
                                                            placeholder="Lugar de Trabajo"
                                                            formControlName="lugarTrabajo" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <input type="text" class="form-control" id="textTelefonoTrabajo"
                                                            placeholder="Teléfono del Trabajo"
                                                            formControlName="telefonoTrabajo" mask="0000-0000" />
                                                    </div>
                                                </div>
                                                <hr />
                                                <!-- End Row -->

                                                <!-- Star Row Hijos-->
                                                <div class="form-row">
                                                    <label class="form-check-label" for="checkboxHijo">¿Tiene Hijos?
                                                        &nbsp;</label>
                                                    <!-- <div class="col-md-3"> -->
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="checkbox"
                                                            id="checkboxHijo" data-md-icheck
                                                            (change)="nhijosVisible($event)" formControlName="hijo" />
                                                    </div>
                                                    <!-- </div> -->
                                                </div>
                                                <div class="form-row" *ngIf="ifHijo">
                                                    <label class="col-form-label"><i class="fa fa-envelope-ope"
                                                            aria-hidden="true"></i> Número de
                                                        Hijos</label>
                                                    <div classs="col-md-3">
                                                        <input type="number" min="1" max="100" class="form-control"
                                                            id="textNHijos" placeholder="Número de Hijos"
                                                            formControlName="nHijo" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->

                                                <hr />
                                                <div class="form-row">
                                                    <label class="form-check-label" for="checkboxBeca">¿Es Becado?
                                                        &nbsp;</label>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="checkbox"
                                                            id="checkboxBeca" data-md-icheck (change)="nBecado($event)"
                                                            formControlName="beca" />
                                                    </div>
                                                </div>
                                                <div class="form-row" *ngIf="ifBecado">
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup">Becado Por</label>
                                                        <input type="text" class="form-control" id="textBecadoPor"
                                                            placeholder="Becado Por" formControlName="becadoPor" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label class="labelGroup">Tipo de Beca</label>
                                                        <select class="custom-select" id="textTipoBeca"
                                                            formControlName="tipoBeca">
                                                            <option value="" disabled>Seleccione una opción</option>
                                                            <option value="BC">Beca Completa</option>
                                                            <option value="MB">Media Beca</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-check-label">¿Incluye Matricula?
                                                            &nbsp;</label>
                                                        <input class="form-check form-check-inline" type="checkbox"
                                                            id="checkboxIncluyeMatricula"
                                                            formControlName="incluyeMatricula" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->
                                                <!-- Star Row  Observaciones -->
                                                <hr />
                                                <div class="form-row">
                                                    <div class="form-group col-md-12">
                                                        <label class="labelGroup"><i class="fa fa-info"
                                                                aria-hidden="true"></i>
                                                            Observaciones</label>
                                                        <input type="text" class="form-control" id="textObservaciones"
                                                            placeholder="Observaciones" formControlName="observacion" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->
                                            </ng-template>
                                        </ngb-panel>
                                        <ngb-panel id="tab-documentos" title="DOCUMENTOS ENTREGADOS">
                                            <ng-template ngbPanelContent>
                                                <div class="form-row">
                                                    <h3>Documentos</h3>
                                                    <hr />
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxPartidaNacimientoOriginal">Partida de
                                                        Nacimiento Original
                                                    </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxPartidaNacimientoOriginal"
                                                                formControlName="partidaNacimientoOriginal" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxPartidaNacimientoCopia">Partida de
                                                        Nacimiento Copia </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxPartidaNacimientoCopia"
                                                                formControlName="partidaNacimientoCopia" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxDiplomaBachillerCopia">Diploma de
                                                        Bachiller Copia </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxDiplomaBachillerCopia"
                                                                formControlName="diplomaBachillerCopia" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxIdentificacionCopia">Fotocopia de Cedula
                                                    </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxIdentificacionCopia"
                                                                formControlName="identificacionCopia" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxFotoCarnet">Fotos (Tamaño Carnet)
                                                    </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxFotoCarnet" formControlName="fotoCarnet" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxCertificadoNotasOriginal">Certificados
                                                        de Notas Original
                                                    </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxCertificadoNotasOriginal"
                                                                formControlName="certificadoNotasOriginal" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-check-label col-md-3"
                                                        for="checkboxCertificadoNotasCopia">Certificados de
                                                        Notas Copia </label>
                                                    <div class="col-md-3">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="checkboxCertificadoNotasCopia"
                                                                formControlName="certificadoNotasCopia" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                        <ngb-panel id="tab-datosPadres" title="INFORMACIÓN DEL PADRE,MADRE / CONYUGE">
                                            <ng-template ngbPanelContent>
                                                <hr class="d-block" />
                                                <!-- Star Row  Madre -->
                                                <div class="form-row">
                                                    <label class="labelGroup"><i class="fa fa-address-book"
                                                            aria-hidden="true"></i> Datos de la
                                                        Madre</label>
                                                    <div class="form-group col-md-4 ">
                                                        <input type="text" class="form-control" id="textNombreMadre"
                                                            placeholder="Nombre Completo"
                                                            formControlName="nombreMadre" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <input type="text" class="form-control" id="textTelefonMadre"
                                                            placeholder="Teléfono Madre" formControlName="telefonoMadre"
                                                            mask="0000-0000" />
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-check-label">¿Vive con ella? &nbsp;</label>
                                                        <input class="form-check form-check-inline" type="checkbox"
                                                            id="checkboxViveConMadre" formControlName="viveConMadre" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->
                                                <!-- Star Row  Padre -->
                                                <div class="form-row">
                                                    <label class="labelGroup"><i class="fa fa-address-book"
                                                            aria-hidden="true"></i> Datos del
                                                        Padre</label>
                                                    <div class="form-group col-md-4 ">
                                                        <input type="text" class="form-control" id="textNombrePadre"
                                                            placeholder="Nombre Completo"
                                                            formControlName="nombrePadre" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <input type="text" class="form-control" id="textTelefonPadre"
                                                            placeholder="Teléfono Padre" formControlName="telefonoPadre"
                                                            mask="0000-0000" />
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-check-label">¿Vive con él? &nbsp;</label>
                                                        <input class="form-check form-check-inline " type="checkbox"
                                                            id="checkboxViveConPadre" formControlName="viveConPadre" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->
                                                <!-- Star Row  Conyuge -->
                                                <div class="form-row">
                                                    <label class="labelGroup"><i class="fa fa-address-book"
                                                            aria-hidden="true"></i> Datos del
                                                        Cónyuge</label>
                                                    <div class="form-group col-md-4 ">
                                                        <input type="text" class="form-control" id="textNombreConyuge"
                                                            placeholder="Nombre Completo"
                                                            formControlName="nombreConyuge" />
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <input type="text" class="form-control" id="textTelefonConyuge"
                                                            placeholder="Teléfono Cónyuge"
                                                            formControlName="telefonoConyuge" mask="0000-0000" />
                                                    </div>
                                                </div>
                                                <!-- End Row -->
                                            </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                    <!-- end collapse datos generales -->
                                </ng-template>
                            </ngb-tab>
                            <ngb-tab>
                                <ng-template ngbTabTitle><b>Información Académica</b></ng-template>
                                <ng-template ngbTabContent>
                                    <ngb-accordion activeIds="tab-informacionAcademica-Carrera">
                                        <ngb-panel id="tab-informacionAcademica-Carrera" title="General">
                                            <ng-template ngbPanelContent>
                                                <!-- Star Row  Información Académica -->
                                                <div class="form-row">
                                                    <div class="form-group col-12 col-md-6">
                                                        <label class="labelGroup" for="textEstudios">Estudios:</label>
                                                            <input type="text" class="form-control" id="textEstudios"
                                                            placeholder="Estudios"
                                                           formControlName="estudios" />
                                                    </div>
                                                    <div class="form-group col-12 col-md-6">
                                                        <label  class="labelGroup" for="situacion_acedemica">Situación Académica:</label>
                                                        <select formControlName="situacionAcademica" id="situacion_acedemica" class="custom-select">
                                                            <option value="" disabled>Seleccione una Opción </option>
                                                            <option value="Bachiller">Bachiller</option>
                                                            <option value="Egresado">Egresado</option>
                                                            <option value="Otros">Otros</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <hr />
                                                <div class="content-table">
                                                    <ng-container formArrayName="grupoEstudiantes">
                                                        <div class="form-row">
                                                            <div class="col-1 text-center">
                                                                <label class="labelGroup"></label>
                                                            </div>
                                                            <div class="form-group col-6">
                                                                <label class="labelGroup">Grupo</label>
                                                            </div>
                                                            <div class="form-group text-center  col-1">
                                                                <label class="labelGroup">Activo</label>
                                                            </div>
                                                            <div class="form-group text-center  col-2">
                                                                <label class="labelGroup">Egresado</label>
                                                            </div>
                                                            <div class="form-group  col-2">
                                                                <label class="labelGroup">Año</label>
                                                            </div>
                                                        </div>
                                                        <ng-container
                                                            *ngFor="let grupo of grupoEstudiantes.controls; let i = index"
                                                            [formGroupName]="i">
                                                            <!-- Star Row -->
                                                            <div class="form-row">
                                                                <div class="col-1 text-center">
                                                                    <div class="d-inline">
                                                                        <button type="button" class="btn btn-outline-danger"
                                                                            (click)="removeGrupo()">
                                                                            <i class="fa fa-trash" aria-hidden="true"></i>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group col-md-6">
                                                                    <select class="custom-select" id="Grupo"
                                                                        formControlName="grupoID">
                                                                        <option value="" disabled>Seleccione una opción
                                                                        </option>
                                                                        <ng-container *ngFor="let grupo of grupos">
                                                                            <option value="{{ grupo['id'] }}">
                                                                                {{ grupo['nombre'] }}</option>
                                                                        </ng-container>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group col-1 text-center">
                                                                    <div class="form-check ">
                                                                        <input class="form-check-input" type="checkbox"
                                                                            id="checkboxActivo" formControlName="activo" />
                                                                    </div>
                                                                </div>
                                                                <div class="form-group  col-2 text-center">
                                                                    <div class="form-check ">
                                                                        <input class="form-check-input" type="checkbox"
                                                                            id="checkboxEgresado" data-md-icheck
                                                                            (change)="nEgresado($event)"
                                                                            formControlName="egresado" />
                                                                    </div>
                                                                </div>
                                                                <div class="form-group  col-2" *ngIf='ifEgresado'>
                                                                    <input type="date" class="form-control"
                                                                        id="textAnioEgreso" placeholder="2019"
                                                                        formControlName="anioEgreso" />
                                                                </div>
                                                            </div>
                                                            <!-- End Row -->
                                                        </ng-container>
                                                        <hr />
                                                        <div class="col-auto">
                                                            <div class="text-left success-button">
                                                                <button type="button" class="btn btn-outline-success"
                                                                    (click)="addGrupo()">Agregar Grupo</button>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                                <!-- End Row -->
                                            </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                </ng-template>
                            </ngb-tab>
                            <ngb-tab>
                                <ng-template ngbTabTitle><b>Matrícula</b></ng-template>
                                 <ng-template ngbTabContent>
                                    <ngb-accordion activeIds="tab-matricula">
                                        <ngb-panel id="tab-matricula" title="General">
                                            <ng-template ngbPanelContent>
                                                <!-- Star Row  Matricula -->
                                                <div class="">
                                                    <ng-container formArrayName="matriculas">
                                                            <div class="table-responsive">
                                                                <table class="table">
                                                                    <thead class="thead-inverse">
                                                                        <tr>
                                                                            <th></th>
                                                                            <th>
                                                                                <label class="labelGroup">Grupo</label> 
                                                                            </th>
                                                                            <th class="text-center">
                                                                                <label class="labelGroup">Año</label>
                                                                            </th>
                                                                            <th class="text-center">
                                                                                <label class="labelGroup">Nuevo Ingreso</label>
                                                                            </th>
                                                                            <th style="min-width: 150px;">
                                                                                <label class="labelGroup">Recibo</label>
                                                                            </th>
                                                                            <th>
                                                                                <label class="labelGroup">Fecha</label>
                                                                            </th>
                                                                        </tr>
                                                                        </thead>
                                                                    <tbody>
                                                                        <ng-container
                                                                            *ngFor="let matricula of matriculas.controls; let i = index"
                                                                            [formGroupName]="i">
                                                                            <!-- Star Row -->
                                                                            <tr>
                                                                                <td>
                                                                                    <div class="form-row">
                                                                                        <div class="d-inline">
                                                                                            <button type="button" class="btn btn-outline-danger"
                                                                                                (click)="removeMatricula()">
                                                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                                                            </button>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <select class="custom-select matricula_grupoId "
                                                                                        formControlName="grupoID">
                                                                                        <option value="" disabled>Seleccione un Grupo
                                                                                        </option>
                                                                                        <ng-container *ngFor="let grupo of grupos">
                                                                                            <option value="{{ grupo['id'] }}">
                                                                                                {{ grupo['nombre'] }}</option>
                                                                                        </ng-container>
                                                                                    </select>
                                                                                </td>
                                                                                <td>
                                                                                    <select class="custom-select matricula_grupoId "  formControlName="anio"
                                                                                       >
                                                                                        <option value="" disabled>Año
                                                                                        </option>
                                                                                        <option value="I">I Año</option>
                                                                                        <option value="II">II Año</option>
                                                                                        <option value="III">III Año</option>
                                                                                        <option value="IV">IV Año</option>
                                                                                        <option value="V">V Año</option>
                                                                                        <option value="VI">VI Año</option>
                                                                                    </select>
                                                                                </td>
                                                                                <td>
                                                                                    <div class="form-check text-center">
                                                                                        <input class="form-check-input checkboxNuevoIngreso" type="checkbox"
                                                                                             formControlName="nuevoIngreso" />
                                                                                    </div>
                                                                                </td>
                                                                                <td>
                                                                                    <input type="number" class="form-control textRecibo"
                                                                                     placeholder="N° Recibo"
                                                                                    formControlName="recibo" />
                                                                                </td>
                                                                                <td>
                                                                                    <input type="date" class="form-control textRecibo"
                                                                                    placeholder="Fecha"
                                                                                    formControlName="fecha" [value]="matricula.get('fecha').value | dateformat" />
                                                                                </td>
                                                                            </tr>
                                                                            <!-- End Row -->
                                                                        </ng-container>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <hr />
                                                            <div class="col-auto">
                                                                <div class="text-left success-button">
                                                                    <button type="button" class="btn btn-outline-success"
                                                                        (click)="addMatricula()">Agregar Matrícula</button>
                                                                </div>
                                                            </div>
                                                    </ng-container>
                                                </div>
                                                <!-- End Row Matricula-->
                                            </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                 </ng-template>
                            </ngb-tab>
                            <ngb-tab  *ngIf="login['tipo'] === 1 && isToAdd === false" >
                                <ng-template ngbTabTitle><b>Acceso</b></ng-template>
                                 <ng-template ngbTabContent>
                                    <ngb-accordion activeIds="tab-acceso">
                                        <ngb-panel id="tab-acceso" title="General">
                                            <ng-template ngbPanelContent>
                                                <div class="">
                                                    <hr class="d-block" />
                                                    <h3>
                                                        Datos para Iniciar Sesión en el Sistema
                                                    </h3>
                                                    <hr class="d-block" />
                                                    <ng-container formArrayName="user">
                                                        <!-- Star Row Información de Usuario -->
                                                        <div class="form-row">
                                                            <div class="form-group col-md-12">
                                                            <label for="textUserName" class="labelGroup"><i class="fa fa-user" aria-hidden="true"></i> Nombre del Usuario</label>
                                                            <input
                                                                type="text"
                                                                class="form-control"
                                                                placeholder="Nombre de Usuario con el que iniciará Sesión"
                                                                required
                                                                formControlName="userName"
                                                                autocomplete="off"
                                                            />
                                                            </div>
                                                        </div>
                                                        <div class="form-row" *ngIf="!user.verificado">
                                                            <div class="form-group col-md-12">
                                                            <label for="textPass" class="labelGroup"><i class="fa fa-key" aria-hidden="true"></i> Contraseña por Defecto</label>
                                                            <input
                                                                type="text"
                                                                class="form-control"
                                                                placeholder="Contraseña "
                                                                formControlName="passwordDefault"
                                                            />
                                                            </div>
                                                        </div>
                                                        <div class="form-row" *ngIf="user.verificado === true">
                                                            <div class="form-group col-md-6">
                                                            <label for="textPass" class="labelGroup"><i class="fa fa-key" aria-hidden="true"></i> Contraseña</label>
                                                            <input
                                                                type="password"
                                                                class="form-control"
                                                                placeholder="Contraseña"
                                                                required
                                                                formControlName="password"
                                                                autocomplete="off"
                                                                [ngClass]="{ 'is-invalid': onValidarUser &&  u.get('password').errors }"
                                                            />
                                                            <div *ngIf=" u.get('password').errors" class="invalid-feedback">
                                                                <div *ngIf="u.get('password').required">Digite Nuevamente la Contraseña</div>
                                                            </div>
                                                            </div>
                                                            <div class="form-group col-md-6">
                                                            <label for="textPassConfirm" class="labelGroup"
                                                                ><i class="fa fa-key" aria-hidden="true"></i> Confirmar Contraseña</label
                                                            >
                                                            <input type="password" class="form-control " id="textPassConfirm" placeholder="Repetir Contraseña" autocomplete="off" required 
                                                            [ngClass]="{ 'is-invalid': onValidarUser &&  u.get('passwordConfirm').errors }" formControlName="passwordConfirm"/>
                                                                  <div *ngIf=" u.get('passwordConfirm').errors" class="invalid-feedback">
                                                                    <div *ngIf="u.get('passwordConfirm').required">Digite Nuevamente la Contraseña</div>
                                                                 </div>
                                                            </div>
                                                            <div class="form-group col-md-3">
                                                                <button class="btn btn-primary" type="button" (click)="changePassword()"
                                                                    [disabled]="estudianteForm.get('user').pristine">Actualizar Contraseña
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <!-- End Row -->
                                                    </ng-container>
                                                </div>
                                            </ng-template>
                                        </ngb-panel>
                                    </ngb-accordion>
                                </ng-template>
                            </ngb-tab>
                        </ngb-tabset>
                        <div class="form-row">
                            <div class="buttons-row">
                                <button class="btn btn-success" type="submit"
                                    [disabled]="estudianteForm.pristine">Guardar</button>
                                <button type="button" class="btn btn-success" (click)="goBack()">Atras</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="datatableview" *ngIf="isToList">
        <div class="container">
            <div class="row">
                <div class="col">
                    <hr class="d-block" />
                    <h5><i class="fa fa-list-alt" aria-hidden="true"></i>Filtro de Estudiantes</h5>
                    <hr class="d-block" />
                    <div class="form-row align-items-center mb-2">
                        <div class="col-sm-6 col-xl-8">
                            <label class="labelGroup"><b>Grupo</b></label>
                            <select class="custom-select" id="textFilterByGrupo"
                                (change)="getEstudianteByGrupo($event)">
                                <option value="" disabled>Seleccione un Grupo</option>
                                <ng-container *ngFor="let grupo of grupos">
                                    <option value="{{ grupo.id }}">{{ grupo.nombre }}</option>
                                </ng-container>
                            </select>
                        </div>
                    </div>
                    <div class="form-row align-items-center mb-2">
                        <div class="col-xl-8">
                            <label class="sr-only" for="searchText">Busqueda</label>
                            <input [(ngModel)]="searchText" class="form-control" id="searchText"
                                placeholder="Busqueda por Nombre, Apellidos" />
                        </div>
                    </div>
                    <div class="content-table-overflow">
                        <table class="table table-striped table-responsive table-hover" [mfData]="selectedEstudiantes"
                            #mf="mfDataTable" [mfRowsOnPage]="10000">
                            <thead>
                                <tr>
                                    <th style="widows: auto; min-width:145px;">
                                        <span><i class="fa fa-cog" aria-hidden="true"></i> Opciones</span>
                                    </th>
                                    <th style="">
                                        <mfDefaultSorter by="nombre"><i class="fa fa-sort" aria-hidden="true"></i> Nombre
                                        </mfDefaultSorter>
                                    </th>
                                    <th style="">
                                        <mfDefaultSorter by="apellidoPat"><i class="fa fa-sort" aria-hidden="true"></i>
                                            Apellidos
                                        </mfDefaultSorter>
                                    </th>
                                    <th style="">
                                        <mfDefaultSorter by="identificacion"><i class="fa fa-sort" aria-hidden="true"></i>
                                            Identificación
                                        </mfDefaultSorter>
                                    </th>
                                    <th style="">
                                        <mfDefaultSorter by="carnet"><i class="fa fa-sort" aria-hidden="true"></i>
                                            N° Carnet
                                        </mfDefaultSorter>
                                    </th>
                                    <th style="">
                                        <mfDefaultSorter by="celular"><i class="fa fa-sort" aria-hidden="true"></i>
                                            Contacto
                                        </mfDefaultSorter>
                                    </th>
                                    <th style="">
                                        <mfDefaultSorter by="fechaAlta"><i class="fa fa-sort" aria-hidden="true"></i> Actualizado </mfDefaultSorter>
                                    </th>
                                </tr>
                            </thead>
                            <tbody style="position: relative;">
                                <tr
                                    *ngFor="let estudiante of (mf.data | filter: { nombre: searchText, apellidoPat: searchText, identificacion: searchText, fechaAlta: searchText })">
                                    <td>
                                        <button type="button" class="btn btn-outline-primary" (click)="addEstudiante()">
                                            <i class="fa fa-plus" aria-hidden="true"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-primary"
                                            (click)="updateEstudiante(estudiante)">
                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-primary"
                                            (click)="onDeleted(estudiante)">
                                            <i class="fa fa-trash" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                    <td>{{ estudiante.nombre }}</td>
                                    <td>{{ estudiante.apellidoPat + ' ' + estudiante.apellidoMat }}</td>
                                    <td>{{ estudiante.identificacion }}</td>
                                    <td>{{ estudiante.carnet }}</td>
                                    <td class="text-right">{{ estudiante.celular }}</td>
                                    <td> {{ estudiante.fechaAlta | date: 'd/M/yy hh:mm:ss' }}</td>                        
                                </tr>
                                <tr>
                                    <td>
                                        <button type="button" class="btn btn-outline-primary" (click)="addEstudiante()">
                                            <i class="fa fa-plus" aria-hidden="true"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <div class="loading-container">
                                            <div class="loading">
                                                <ng-template #customLoadingTemplate>
                                                    <div class="custom-class">
                                                        <h5>
                                                            Cargando...
                                                        </h5>
                                                    </div>
                                                </ng-template>
                                                <ngx-loading [show]="loading"
                                                    [config]="{primaryColour: primaryColour, secondaryColour: secondaryColour, backdropBorderRadius: '3px' }"
                                                    [template]="customLoadingTemplate"></ngx-loading>
                                            </div>
                                        </div>
                                    </td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <!-- <td colspan="6">
                                        <mfBootstrapPaginator [rowsOnPageSet]="[5, 10, 25]"></mfBootstrapPaginator>
                                    </td> -->
                                </tr>
                            </tfoot>
                        </table>
                    </div>  
                </div>
            </div>
        </div>
    </div>
</div>